"use strict";var cov_11o0ypfr0j=function(){var path="C:\\server\\controllers\\users.js";var hash="066f7f07f58ea066e4659635d5684205c3c10d0c";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\server\\controllers\\users.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:6,column:0},end:{line:6,column:28}},"2":{start:{line:8,column:20},end:{line:8,column:67}},"3":{start:{line:10,column:13},end:{line:10,column:63}},"4":{start:{line:12,column:14},end:{line:12,column:65}},"5":{start:{line:14,column:39},end:{line:14,column:95}},"6":{start:{line:17,column:13},end:{line:68,column:1}},"7":{start:{line:18,column:13},end:{line:20,column:4}},"8":{start:{line:19,column:4},end:{line:19,column:38}},"9":{start:{line:22,column:2},end:{line:25,column:5}},"10":{start:{line:22,column:12},end:{line:25,column:5}},"11":{start:{line:27,column:30},end:{line:27,column:69}},"12":{start:{line:28,column:14},end:{line:28,column:41}},"13":{start:{line:30,column:2},end:{line:35,column:3}},"14":{start:{line:31,column:4},end:{line:34,column:7}},"15":{start:{line:37,column:11},end:{line:37,column:53}},"16":{start:{line:38,column:16},end:{line:46,column:3}},"17":{start:{line:48,column:14},end:{line:50,column:4}},"18":{start:{line:52,column:18},end:{line:52,column:35}},"19":{start:{line:54,column:2},end:{line:54,column:34}},"20":{start:{line:56,column:2},end:{line:66,column:5}},"21":{start:{line:67,column:2},end:{line:67,column:15}},"22":{start:{line:70,column:15},end:{line:70,column:21}},"23":{start:{line:71,column:0},end:{line:71,column:30}}},fnMap:{"0":{name:"_interopRequireDefault",decl:{start:{line:14,column:9},end:{line:14,column:31}},loc:{start:{line:14,column:37},end:{line:14,column:97}},line:14},"1":{name:"signup",decl:{start:{line:17,column:22},end:{line:17,column:28}},loc:{start:{line:17,column:39},end:{line:68,column:1}},line:17},"2":{name:"(anonymous_2)",decl:{start:{line:18,column:36},end:{line:18,column:37}},loc:{start:{line:18,column:49},end:{line:20,column:3}},line:18}},branchMap:{"0":{loc:{start:{line:14,column:46},end:{line:14,column:94}},type:"cond-expr",locations:[{start:{line:14,column:70},end:{line:14,column:73}},{start:{line:14,column:76},end:{line:14,column:94}}],line:14},"1":{loc:{start:{line:14,column:46},end:{line:14,column:67}},type:"binary-expr",locations:[{start:{line:14,column:46},end:{line:14,column:49}},{start:{line:14,column:53},end:{line:14,column:67}}],line:14},"2":{loc:{start:{line:22,column:2},end:{line:25,column:5}},type:"if",locations:[{start:{line:22,column:2},end:{line:25,column:5}},{start:{line:22,column:2},end:{line:25,column:5}}],line:22},"3":{loc:{start:{line:30,column:2},end:{line:35,column:3}},type:"if",locations:[{start:{line:30,column:2},end:{line:35,column:3}},{start:{line:30,column:2},end:{line:35,column:3}}],line:30}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184",hash:"066f7f07f58ea066e4659635d5684205c3c10d0c"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}return coverage[path]=coverageData;}();cov_11o0ypfr0j.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_11o0ypfr0j.s[1]++;exports["default"]=void 0;var _jsonwebtoken=(cov_11o0ypfr0j.s[2]++,_interopRequireDefault(require("jsonwebtoken")));var _users=(cov_11o0ypfr0j.s[3]++,_interopRequireDefault(require("../models/users")));var _users2=(cov_11o0ypfr0j.s[4]++,_interopRequireDefault(require("../helpers/users")));function _interopRequireDefault(obj){cov_11o0ypfr0j.f[0]++;cov_11o0ypfr0j.s[5]++;return(cov_11o0ypfr0j.b[1][0]++,obj)&&(cov_11o0ypfr0j.b[1][1]++,obj.__esModule)?(cov_11o0ypfr0j.b[0][0]++,obj):(cov_11o0ypfr0j.b[0][1]++,{"default":obj});}/* eslint-disable prefer-destructuring */cov_11o0ypfr0j.s[6]++;var signup=function signup(req,res){cov_11o0ypfr0j.f[1]++;var user=(cov_11o0ypfr0j.s[7]++,_users["default"].find(function(e){cov_11o0ypfr0j.f[2]++;cov_11o0ypfr0j.s[8]++;return e.email===req.body.email;}));cov_11o0ypfr0j.s[9]++;if(user){cov_11o0ypfr0j.b[2][0]++;cov_11o0ypfr0j.s[10]++;return res.status(405).json({status:405,error:'The email is already registered'});}else{cov_11o0ypfr0j.b[2][1]++;}var _validateUserSignup$v=(cov_11o0ypfr0j.s[11]++,_users2["default"].validation(req.body)),error=(cov_11o0ypfr0j.s[12]++,_validateUserSignup$v.error);cov_11o0ypfr0j.s[13]++;if(error){cov_11o0ypfr0j.b[3][0]++;cov_11o0ypfr0j.s[14]++;return res.status(400).json({status:400,error:error.details[0].message});}else{cov_11o0ypfr0j.b[3][1]++;}var id=(cov_11o0ypfr0j.s[15]++,parseInt(_users["default"].length+1,10));var newUser=(cov_11o0ypfr0j.s[16]++,{id:id,email:req.body.email,firstName:req.body.firstName,lastName:req.body.lastName,password:req.body.password,address:req.body.address,isAdmin:req.body.isAdmin});var token=(cov_11o0ypfr0j.s[17]++,_jsonwebtoken["default"].sign(newUser,'SECRET_KEY',{expiresIn:'24hrs'}));var firstName=(cov_11o0ypfr0j.s[18]++,newUser.firstName);cov_11o0ypfr0j.s[19]++;_users["default"].push(newUser);cov_11o0ypfr0j.s[20]++;res.status(201).json({status:201,message:"Welcome back, ".concat(firstName,"!"),data:{token:token,id:newUser.id,firstName:newUser.firstName,lastName:newUser.lastName,email:newUser.email}});cov_11o0ypfr0j.s[21]++;return false;};var _default=(cov_11o0ypfr0j.s[22]++,signup);cov_11o0ypfr0j.s[23]++;exports["default"]=_default;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJzLmpzIl0sIm5hbWVzIjpbInNpZ251cCIsInJlcSIsInJlcyIsInVzZXIiLCJ1c2VycyIsImZpbmQiLCJlIiwiZW1haWwiLCJib2R5Iiwic3RhdHVzIiwianNvbiIsImVycm9yIiwidmFsaWRhdGVVc2VyU2lnbnVwIiwidmFsaWRhdGlvbiIsImRldGFpbHMiLCJtZXNzYWdlIiwiaWQiLCJwYXJzZUludCIsImxlbmd0aCIsIm5ld1VzZXIiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsInBhc3N3b3JkIiwiYWRkcmVzcyIsImlzQWRtaW4iLCJ0b2tlbiIsImp3dCIsInNpZ24iLCJleHBpcmVzSW4iLCJwdXNoIiwiZGF0YSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUNBOztBQUNBOztBQUNBOzs7O0FBSEE7QUFLQSxJQUFNQSxNQUFNLEdBQUcsU0FBVEEsTUFBUyxDQUFDQyxHQUFELEVBQU1DLEdBQU4sRUFBYztBQUMzQixNQUFNQyxJQUFJLEdBQUdDLGtCQUFNQyxJQUFOLENBQVcsVUFBQUMsQ0FBQztBQUFBLFdBQUlBLENBQUMsQ0FBQ0MsS0FBRixLQUFZTixHQUFHLENBQUNPLElBQUosQ0FBU0QsS0FBekI7QUFBQSxHQUFaLENBQWI7O0FBQ0EsTUFBSUosSUFBSixFQUFVLE9BQU9ELEdBQUcsQ0FBQ08sTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQUVELElBQUFBLE1BQU0sRUFBRSxHQUFWO0FBQWVFLElBQUFBLEtBQUssRUFBRTtBQUF0QixHQUFyQixDQUFQOztBQUZpQiw4QkFJVEMsbUJBQW1CQyxVQUFuQixDQUE4QlosR0FBRyxDQUFDTyxJQUFsQyxDQUpTO0FBQUEsTUFJbkJHLEtBSm1CLHlCQUluQkEsS0FKbUI7O0FBSzNCLE1BQUlBLEtBQUosRUFBVztBQUNULFdBQU9ULEdBQUcsQ0FBQ08sTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQUVELE1BQUFBLE1BQU0sRUFBRSxHQUFWO0FBQWVFLE1BQUFBLEtBQUssRUFBRUEsS0FBSyxDQUFDRyxPQUFOLENBQWMsQ0FBZCxFQUFpQkM7QUFBdkMsS0FBckIsQ0FBUDtBQUNEOztBQUVELE1BQU1DLEVBQUUsR0FBR0MsUUFBUSxDQUFDYixrQkFBTWMsTUFBTixHQUFlLENBQWhCLEVBQW1CLEVBQW5CLENBQW5CO0FBQ0EsTUFBTUMsT0FBTyxHQUFHO0FBQ2RILElBQUFBLEVBQUUsRUFBRkEsRUFEYztBQUVkVCxJQUFBQSxLQUFLLEVBQUVOLEdBQUcsQ0FBQ08sSUFBSixDQUFTRCxLQUZGO0FBR2RhLElBQUFBLFNBQVMsRUFBRW5CLEdBQUcsQ0FBQ08sSUFBSixDQUFTWSxTQUhOO0FBSWRDLElBQUFBLFFBQVEsRUFBRXBCLEdBQUcsQ0FBQ08sSUFBSixDQUFTYSxRQUpMO0FBS2RDLElBQUFBLFFBQVEsRUFBRXJCLEdBQUcsQ0FBQ08sSUFBSixDQUFTYyxRQUxMO0FBTWRDLElBQUFBLE9BQU8sRUFBRXRCLEdBQUcsQ0FBQ08sSUFBSixDQUFTZSxPQU5KO0FBT2RDLElBQUFBLE9BQU8sRUFBRXZCLEdBQUcsQ0FBQ08sSUFBSixDQUFTZ0I7QUFQSixHQUFoQjs7QUFTQSxNQUFNQyxLQUFLLEdBQUdDLHlCQUFJQyxJQUFKLENBQVNSLE9BQVQsRUFBa0IsWUFBbEIsRUFBZ0M7QUFBRVMsSUFBQUEsU0FBUyxFQUFFO0FBQWIsR0FBaEMsQ0FBZDs7QUFDQSxNQUFNUixTQUFTLEdBQUdELE9BQU8sQ0FBQ0MsU0FBMUI7O0FBRUFoQixvQkFBTXlCLElBQU4sQ0FBV1YsT0FBWDs7QUFFQWpCLEVBQUFBLEdBQUcsQ0FBQ08sTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQ25CRCxJQUFBQSxNQUFNLEVBQUUsR0FEVztBQUVuQk0sSUFBQUEsT0FBTywwQkFBbUJLLFNBQW5CLE1BRlk7QUFHbkJVLElBQUFBLElBQUksRUFBRTtBQUNKTCxNQUFBQSxLQUFLLEVBQUxBLEtBREk7QUFFSlQsTUFBQUEsRUFBRSxFQUFFRyxPQUFPLENBQUNILEVBRlI7QUFHSkksTUFBQUEsU0FBUyxFQUFFRCxPQUFPLENBQUNDLFNBSGY7QUFJSkMsTUFBQUEsUUFBUSxFQUFFRixPQUFPLENBQUNFLFFBSmQ7QUFLSmQsTUFBQUEsS0FBSyxFQUFFWSxPQUFPLENBQUNaO0FBTFg7QUFIYSxHQUFyQjtBQVlBLFNBQU8sS0FBUDtBQUNELENBckNEOztlQXVDZVAsTSIsInNvdXJjZVJvb3QiOiJDOlxcc2VydmVyXFxjb250cm9sbGVycyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIHByZWZlci1kZXN0cnVjdHVyaW5nICovXHJcbmltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcclxuaW1wb3J0IHVzZXJzIGZyb20gJy4uL21vZGVscy91c2Vycyc7XHJcbmltcG9ydCB2YWxpZGF0ZVVzZXJTaWdudXAgZnJvbSAnLi4vaGVscGVycy91c2Vycyc7XHJcblxyXG5jb25zdCBzaWdudXAgPSAocmVxLCByZXMpID0+IHtcclxuICBjb25zdCB1c2VyID0gdXNlcnMuZmluZChlID0+IGUuZW1haWwgPT09IHJlcS5ib2R5LmVtYWlsKTtcclxuICBpZiAodXNlcikgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgc3RhdHVzOiA0MDUsIGVycm9yOiAnVGhlIGVtYWlsIGlzIGFscmVhZHkgcmVnaXN0ZXJlZCcgfSk7XHJcblxyXG4gIGNvbnN0IHsgZXJyb3IgfSA9IHZhbGlkYXRlVXNlclNpZ251cC52YWxpZGF0aW9uKHJlcS5ib2R5KTtcclxuICBpZiAoZXJyb3IpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IHN0YXR1czogNDAwLCBlcnJvcjogZXJyb3IuZGV0YWlsc1swXS5tZXNzYWdlIH0pO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgaWQgPSBwYXJzZUludCh1c2Vycy5sZW5ndGggKyAxLCAxMCk7XHJcbiAgY29uc3QgbmV3VXNlciA9IHtcclxuICAgIGlkLFxyXG4gICAgZW1haWw6IHJlcS5ib2R5LmVtYWlsLFxyXG4gICAgZmlyc3ROYW1lOiByZXEuYm9keS5maXJzdE5hbWUsXHJcbiAgICBsYXN0TmFtZTogcmVxLmJvZHkubGFzdE5hbWUsXHJcbiAgICBwYXNzd29yZDogcmVxLmJvZHkucGFzc3dvcmQsXHJcbiAgICBhZGRyZXNzOiByZXEuYm9keS5hZGRyZXNzLFxyXG4gICAgaXNBZG1pbjogcmVxLmJvZHkuaXNBZG1pbixcclxuICB9O1xyXG4gIGNvbnN0IHRva2VuID0gand0LnNpZ24obmV3VXNlciwgJ1NFQ1JFVF9LRVknLCB7IGV4cGlyZXNJbjogJzI0aHJzJyB9KTtcclxuICBjb25zdCBmaXJzdE5hbWUgPSBuZXdVc2VyLmZpcnN0TmFtZTtcclxuXHJcbiAgdXNlcnMucHVzaChuZXdVc2VyKTtcclxuXHJcbiAgcmVzLnN0YXR1cygyMDEpLmpzb24oe1xyXG4gICAgc3RhdHVzOiAyMDEsXHJcbiAgICBtZXNzYWdlOiBgV2VsY29tZSBiYWNrLCAke2ZpcnN0TmFtZX0hYCxcclxuICAgIGRhdGE6IHtcclxuICAgICAgdG9rZW4sXHJcbiAgICAgIGlkOiBuZXdVc2VyLmlkLFxyXG4gICAgICBmaXJzdE5hbWU6IG5ld1VzZXIuZmlyc3ROYW1lLFxyXG4gICAgICBsYXN0TmFtZTogbmV3VXNlci5sYXN0TmFtZSxcclxuICAgICAgZW1haWw6IG5ld1VzZXIuZW1haWwsXHJcbiAgICB9LFxyXG4gIH0pO1xyXG5cclxuICByZXR1cm4gZmFsc2U7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBzaWdudXA7XHJcbiJdfQ==