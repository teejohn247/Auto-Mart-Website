"use strict";var cov_11mdat51km=function(){var path="C:\\Auto-Mart-Website\\server\\controllers\\users.js";var hash="159fe72f1c8f76f6b609ec75e3324806ff0a28ce";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Auto-Mart-Website\\server\\controllers\\users.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:6,column:0},end:{line:6,column:28}},"2":{start:{line:8,column:20},end:{line:8,column:67}},"3":{start:{line:10,column:13},end:{line:10,column:63}},"4":{start:{line:12,column:14},end:{line:12,column:65}},"5":{start:{line:14,column:39},end:{line:14,column:95}},"6":{start:{line:17,column:13},end:{line:68,column:1}},"7":{start:{line:18,column:13},end:{line:20,column:4}},"8":{start:{line:19,column:4},end:{line:19,column:38}},"9":{start:{line:22,column:2},end:{line:25,column:5}},"10":{start:{line:22,column:12},end:{line:25,column:5}},"11":{start:{line:27,column:30},end:{line:27,column:69}},"12":{start:{line:28,column:14},end:{line:28,column:41}},"13":{start:{line:30,column:2},end:{line:35,column:3}},"14":{start:{line:31,column:4},end:{line:34,column:7}},"15":{start:{line:37,column:11},end:{line:37,column:53}},"16":{start:{line:38,column:16},end:{line:46,column:3}},"17":{start:{line:48,column:14},end:{line:50,column:4}},"18":{start:{line:52,column:18},end:{line:52,column:35}},"19":{start:{line:54,column:2},end:{line:54,column:34}},"20":{start:{line:56,column:2},end:{line:66,column:5}},"21":{start:{line:67,column:2},end:{line:67,column:15}},"22":{start:{line:70,column:15},end:{line:70,column:21}},"23":{start:{line:71,column:0},end:{line:71,column:30}}},fnMap:{"0":{name:"_interopRequireDefault",decl:{start:{line:14,column:9},end:{line:14,column:31}},loc:{start:{line:14,column:37},end:{line:14,column:97}},line:14},"1":{name:"signup",decl:{start:{line:17,column:22},end:{line:17,column:28}},loc:{start:{line:17,column:39},end:{line:68,column:1}},line:17},"2":{name:"(anonymous_2)",decl:{start:{line:18,column:36},end:{line:18,column:37}},loc:{start:{line:18,column:49},end:{line:20,column:3}},line:18}},branchMap:{"0":{loc:{start:{line:14,column:46},end:{line:14,column:94}},type:"cond-expr",locations:[{start:{line:14,column:70},end:{line:14,column:73}},{start:{line:14,column:76},end:{line:14,column:94}}],line:14},"1":{loc:{start:{line:14,column:46},end:{line:14,column:67}},type:"binary-expr",locations:[{start:{line:14,column:46},end:{line:14,column:49}},{start:{line:14,column:53},end:{line:14,column:67}}],line:14},"2":{loc:{start:{line:22,column:2},end:{line:25,column:5}},type:"if",locations:[{start:{line:22,column:2},end:{line:25,column:5}},{start:{line:22,column:2},end:{line:25,column:5}}],line:22},"3":{loc:{start:{line:30,column:2},end:{line:35,column:3}},type:"if",locations:[{start:{line:30,column:2},end:{line:35,column:3}},{start:{line:30,column:2},end:{line:35,column:3}}],line:30}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184",hash:"159fe72f1c8f76f6b609ec75e3324806ff0a28ce"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}return coverage[path]=coverageData;}();cov_11mdat51km.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_11mdat51km.s[1]++;exports["default"]=void 0;var _jsonwebtoken=(cov_11mdat51km.s[2]++,_interopRequireDefault(require("jsonwebtoken")));var _users=(cov_11mdat51km.s[3]++,_interopRequireDefault(require("../models/users")));var _users2=(cov_11mdat51km.s[4]++,_interopRequireDefault(require("../helpers/users")));function _interopRequireDefault(obj){cov_11mdat51km.f[0]++;cov_11mdat51km.s[5]++;return(cov_11mdat51km.b[1][0]++,obj)&&(cov_11mdat51km.b[1][1]++,obj.__esModule)?(cov_11mdat51km.b[0][0]++,obj):(cov_11mdat51km.b[0][1]++,{"default":obj});}/* eslint-disable prefer-destructuring */cov_11mdat51km.s[6]++;var signup=function signup(req,res){cov_11mdat51km.f[1]++;var user=(cov_11mdat51km.s[7]++,_users["default"].find(function(e){cov_11mdat51km.f[2]++;cov_11mdat51km.s[8]++;return e.email===req.body.email;}));cov_11mdat51km.s[9]++;if(user){cov_11mdat51km.b[2][0]++;cov_11mdat51km.s[10]++;return res.status(405).json({status:405,error:'The email is already registered'});}else{cov_11mdat51km.b[2][1]++;}var _validateUserSignup$v=(cov_11mdat51km.s[11]++,_users2["default"].validation(req.body)),error=(cov_11mdat51km.s[12]++,_validateUserSignup$v.error);cov_11mdat51km.s[13]++;if(error){cov_11mdat51km.b[3][0]++;cov_11mdat51km.s[14]++;return res.status(400).json({status:400,error:error.details[0].message});}else{cov_11mdat51km.b[3][1]++;}var id=(cov_11mdat51km.s[15]++,parseInt(_users["default"].length+1,10));var newUser=(cov_11mdat51km.s[16]++,{id:id,email:req.body.email,firstName:req.body.firstName,lastName:req.body.lastName,password:req.body.password,address:req.body.address,isAdmin:req.body.isAdmin});var token=(cov_11mdat51km.s[17]++,_jsonwebtoken["default"].sign(newUser,'SECRET_KEY',{expiresIn:'24hrs'}));var firstName=(cov_11mdat51km.s[18]++,newUser.firstName);cov_11mdat51km.s[19]++;_users["default"].push(newUser);cov_11mdat51km.s[20]++;res.status(201).json({status:201,message:"Welcome back, ".concat(firstName,"!"),data:{token:token,id:newUser.id,firstName:newUser.firstName,lastName:newUser.lastName,email:newUser.email}});cov_11mdat51km.s[21]++;return false;};var _default=(cov_11mdat51km.s[22]++,signup);cov_11mdat51km.s[23]++;exports["default"]=_default;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJzLmpzIl0sIm5hbWVzIjpbInNpZ251cCIsInJlcSIsInJlcyIsInVzZXIiLCJ1c2VycyIsImZpbmQiLCJlIiwiZW1haWwiLCJib2R5Iiwic3RhdHVzIiwianNvbiIsImVycm9yIiwidmFsaWRhdGVVc2VyU2lnbnVwIiwidmFsaWRhdGlvbiIsImRldGFpbHMiLCJtZXNzYWdlIiwiaWQiLCJwYXJzZUludCIsImxlbmd0aCIsIm5ld1VzZXIiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsInBhc3N3b3JkIiwiYWRkcmVzcyIsImlzQWRtaW4iLCJ0b2tlbiIsImp3dCIsInNpZ24iLCJleHBpcmVzSW4iLCJwdXNoIiwiZGF0YSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUNBOztBQUNBOztBQUNBOzs7O0FBSEE7QUFLQSxJQUFNQSxNQUFNLEdBQUcsU0FBVEEsTUFBUyxDQUFDQyxHQUFELEVBQU1DLEdBQU4sRUFBYztBQUMzQixNQUFNQyxJQUFJLEdBQUdDLGtCQUFNQyxJQUFOLENBQVcsVUFBQUMsQ0FBQztBQUFBLFdBQUlBLENBQUMsQ0FBQ0MsS0FBRixLQUFZTixHQUFHLENBQUNPLElBQUosQ0FBU0QsS0FBekI7QUFBQSxHQUFaLENBQWI7O0FBQ0EsTUFBSUosSUFBSixFQUFVLE9BQU9ELEdBQUcsQ0FBQ08sTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQUVELElBQUFBLE1BQU0sRUFBRSxHQUFWO0FBQWVFLElBQUFBLEtBQUssRUFBRTtBQUF0QixHQUFyQixDQUFQOztBQUZpQiw4QkFJVEMsbUJBQW1CQyxVQUFuQixDQUE4QlosR0FBRyxDQUFDTyxJQUFsQyxDQUpTO0FBQUEsTUFJbkJHLEtBSm1CLHlCQUluQkEsS0FKbUI7O0FBSzNCLE1BQUlBLEtBQUosRUFBVztBQUNULFdBQU9ULEdBQUcsQ0FBQ08sTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQUVELE1BQUFBLE1BQU0sRUFBRSxHQUFWO0FBQWVFLE1BQUFBLEtBQUssRUFBRUEsS0FBSyxDQUFDRyxPQUFOLENBQWMsQ0FBZCxFQUFpQkM7QUFBdkMsS0FBckIsQ0FBUDtBQUNEOztBQUVELE1BQU1DLEVBQUUsR0FBR0MsUUFBUSxDQUFDYixrQkFBTWMsTUFBTixHQUFlLENBQWhCLEVBQW1CLEVBQW5CLENBQW5CO0FBQ0EsTUFBTUMsT0FBTyxHQUFHO0FBQ2RILElBQUFBLEVBQUUsRUFBRkEsRUFEYztBQUVkVCxJQUFBQSxLQUFLLEVBQUVOLEdBQUcsQ0FBQ08sSUFBSixDQUFTRCxLQUZGO0FBR2RhLElBQUFBLFNBQVMsRUFBRW5CLEdBQUcsQ0FBQ08sSUFBSixDQUFTWSxTQUhOO0FBSWRDLElBQUFBLFFBQVEsRUFBRXBCLEdBQUcsQ0FBQ08sSUFBSixDQUFTYSxRQUpMO0FBS2RDLElBQUFBLFFBQVEsRUFBRXJCLEdBQUcsQ0FBQ08sSUFBSixDQUFTYyxRQUxMO0FBTWRDLElBQUFBLE9BQU8sRUFBRXRCLEdBQUcsQ0FBQ08sSUFBSixDQUFTZSxPQU5KO0FBT2RDLElBQUFBLE9BQU8sRUFBRXZCLEdBQUcsQ0FBQ08sSUFBSixDQUFTZ0I7QUFQSixHQUFoQjs7QUFTQSxNQUFNQyxLQUFLLEdBQUdDLHlCQUFJQyxJQUFKLENBQVNSLE9BQVQsRUFBa0IsWUFBbEIsRUFBZ0M7QUFBRVMsSUFBQUEsU0FBUyxFQUFFO0FBQWIsR0FBaEMsQ0FBZDs7QUFDQSxNQUFNUixTQUFTLEdBQUdELE9BQU8sQ0FBQ0MsU0FBMUI7O0FBRUFoQixvQkFBTXlCLElBQU4sQ0FBV1YsT0FBWDs7QUFFQWpCLEVBQUFBLEdBQUcsQ0FBQ08sTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQ25CRCxJQUFBQSxNQUFNLEVBQUUsR0FEVztBQUVuQk0sSUFBQUEsT0FBTywwQkFBbUJLLFNBQW5CLE1BRlk7QUFHbkJVLElBQUFBLElBQUksRUFBRTtBQUNKTCxNQUFBQSxLQUFLLEVBQUxBLEtBREk7QUFFSlQsTUFBQUEsRUFBRSxFQUFFRyxPQUFPLENBQUNILEVBRlI7QUFHSkksTUFBQUEsU0FBUyxFQUFFRCxPQUFPLENBQUNDLFNBSGY7QUFJSkMsTUFBQUEsUUFBUSxFQUFFRixPQUFPLENBQUNFLFFBSmQ7QUFLSmQsTUFBQUEsS0FBSyxFQUFFWSxPQUFPLENBQUNaO0FBTFg7QUFIYSxHQUFyQjtBQVlBLFNBQU8sS0FBUDtBQUNELENBckNEOztlQXVDZVAsTSIsInNvdXJjZVJvb3QiOiJDOlxcQXV0by1NYXJ0LVdlYnNpdGVcXHNlcnZlclxcY29udHJvbGxlcnMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBwcmVmZXItZGVzdHJ1Y3R1cmluZyAqL1xyXG5pbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbic7XHJcbmltcG9ydCB1c2VycyBmcm9tICcuLi9tb2RlbHMvdXNlcnMnO1xyXG5pbXBvcnQgdmFsaWRhdGVVc2VyU2lnbnVwIGZyb20gJy4uL2hlbHBlcnMvdXNlcnMnO1xyXG5cclxuY29uc3Qgc2lnbnVwID0gKHJlcSwgcmVzKSA9PiB7XHJcbiAgY29uc3QgdXNlciA9IHVzZXJzLmZpbmQoZSA9PiBlLmVtYWlsID09PSByZXEuYm9keS5lbWFpbCk7XHJcbiAgaWYgKHVzZXIpIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IHN0YXR1czogNDA1LCBlcnJvcjogJ1RoZSBlbWFpbCBpcyBhbHJlYWR5IHJlZ2lzdGVyZWQnIH0pO1xyXG5cclxuICBjb25zdCB7IGVycm9yIH0gPSB2YWxpZGF0ZVVzZXJTaWdudXAudmFsaWRhdGlvbihyZXEuYm9keSk7XHJcbiAgaWYgKGVycm9yKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBzdGF0dXM6IDQwMCwgZXJyb3I6IGVycm9yLmRldGFpbHNbMF0ubWVzc2FnZSB9KTtcclxuICB9XHJcblxyXG4gIGNvbnN0IGlkID0gcGFyc2VJbnQodXNlcnMubGVuZ3RoICsgMSwgMTApO1xyXG4gIGNvbnN0IG5ld1VzZXIgPSB7XHJcbiAgICBpZCxcclxuICAgIGVtYWlsOiByZXEuYm9keS5lbWFpbCxcclxuICAgIGZpcnN0TmFtZTogcmVxLmJvZHkuZmlyc3ROYW1lLFxyXG4gICAgbGFzdE5hbWU6IHJlcS5ib2R5Lmxhc3ROYW1lLFxyXG4gICAgcGFzc3dvcmQ6IHJlcS5ib2R5LnBhc3N3b3JkLFxyXG4gICAgYWRkcmVzczogcmVxLmJvZHkuYWRkcmVzcyxcclxuICAgIGlzQWRtaW46IHJlcS5ib2R5LmlzQWRtaW4sXHJcbiAgfTtcclxuICBjb25zdCB0b2tlbiA9IGp3dC5zaWduKG5ld1VzZXIsICdTRUNSRVRfS0VZJywgeyBleHBpcmVzSW46ICcyNGhycycgfSk7XHJcbiAgY29uc3QgZmlyc3ROYW1lID0gbmV3VXNlci5maXJzdE5hbWU7XHJcblxyXG4gIHVzZXJzLnB1c2gobmV3VXNlcik7XHJcblxyXG4gIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcclxuICAgIHN0YXR1czogMjAxLFxyXG4gICAgbWVzc2FnZTogYFdlbGNvbWUgYmFjaywgJHtmaXJzdE5hbWV9IWAsXHJcbiAgICBkYXRhOiB7XHJcbiAgICAgIHRva2VuLFxyXG4gICAgICBpZDogbmV3VXNlci5pZCxcclxuICAgICAgZmlyc3ROYW1lOiBuZXdVc2VyLmZpcnN0TmFtZSxcclxuICAgICAgbGFzdE5hbWU6IG5ld1VzZXIubGFzdE5hbWUsXHJcbiAgICAgIGVtYWlsOiBuZXdVc2VyLmVtYWlsLFxyXG4gICAgfSxcclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIGZhbHNlO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgc2lnbnVwO1xyXG4iXX0=